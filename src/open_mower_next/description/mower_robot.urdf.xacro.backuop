<?xml version="1.0"?>
<robot xmlns:xacro="http://ros.org/wiki/xacro" name="openmower_sim">
<xacro:property name="wheel_radius" value="0.08"/>
<xacro:property name="wheel_separation" value="0.45"/>


<!-- base link -->
<link name="base_link">
<inertial>
<mass value="12.0"/>
<origin xyz="0 0 0"/>
<inertia ixx="0.2" ixy="0.0" ixz="0.0" iyy="0.2" iyz="0.0" izz="0.2"/>
</inertial>
<visual>
<geometry>
<box size="0.6 0.45 0.18"/>
</geometry>
<origin xyz="0 0 0.09"/>
</visual>
<collision>
<geometry>
<box size="0.6 0.45 0.18"/>
</geometry>
<origin xyz="0 0 0.09"/>
</collision>
</link>


<!-- wheels -->
<link name="wheel_left_link"/>
<link name="wheel_right_link"/>


<joint name="wheel_left_joint" type="continuous">
<parent link="base_link"/>
<child link="wheel_left_link"/>
<origin xyz="0 ${wheel_separation/2} 0" rpy="0 0 0"/>
<axis xyz="0 1 0"/>
</joint>


<joint name="wheel_right_joint" type="continuous">
<parent link="base_link"/>
<child link="wheel_right_link"/>
<origin xyz="0 -${wheel_separation/2} 0" rpy="0 0 0"/>
<axis xyz="0 1 0"/>
</joint>


<!-- IMU sensor (virtual link) -->
<link name="imu_link"/>
<joint name="imu_joint" type="fixed">
<parent link="base_link"/>
<child link="imu_link"/>
<origin xyz="0 0 0.05" rpy="0 0 0"/>
</joint>


<!-- GPS (virtual) -->
<link name="gps_link"/>
<joint name="gps_joint" type="fixed">
<parent link="base_link"/>
<child link="gps_link"/>
<origin xyz="0 0 0.12" rpy="0 0 0"/>
</joint>


<!-- ros2_control transmissions & plugin skeleton -->
<!-- A minimal ros2_control configuration expects controllers.yaml to reference these joints -->
<gazebo reference="base_link">
<mu1>0.0</mu1>
</gazebo>


<!-- Gazebo diff drive plugin (classic) -->
<gazebo>
<plugin name="gazebo_ros_diff_drive" filename="libgazebo_ros_diff_drive.so">
<ros>
<namespace>/</namespace>
<remapping>cmd_vel:=/cmd_vel</remapping>
</ros>
<left_wheel>wheel_left_joint</left_wheel>
<right_wheel>wheel_right_joint</right_wheel>
<wheel_separation>${wheel_separation}</wheel_separation>
<wheel_radius>${wheel_radius}</wheel_radius>
<topicName>/odom</topicName>
<gaussianNoise>0.0</gaussianNoise>
</plugin>
</gazebo>


<!-- Sensors (publish from sim_node, but keep links for TF) -->
<xacro:include filename="robot_core.xacro"/>
</robot>